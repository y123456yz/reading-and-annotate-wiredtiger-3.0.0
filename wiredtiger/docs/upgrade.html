<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>WiredTiger: Upgrading and downgrading databases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="wiredtiger.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://wiredtiger.com/"><img alt="Logo" src="LogoFinal-header.png" alt="WiredTiger" /></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber">Version 3.0.0</span>
   </div>
   <div id="projectbrief"><!-- 3.0.0 --></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="banner">
  <a href="https://github.com/wiredtiger/wiredtiger">Fork me on GitHub</a>
  <a class="last" href="http://groups.google.com/group/wiredtiger-users">Join my user group</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li><a href="community.html"><span>Community</span></a></li>
      <li><a href="license.html"><span>License</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('upgrade.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Upgrading and downgrading databases </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The upgrade/downgrade process is only necessary for major or minor WiredTiger releases (releases where the major or minor version number changed). Patch releases (where only the patch number changed), do not contain any API or file format changes, and do not require anything other than a link step or shared library installation for upgrading or downgrading. However, the complete WiredTiger library must be re-built from scratch when changing versions, as there is no guarantee modules from one version of the library will work with modules from any other version.</p>
<p>The rest of this page discusses upgrading and downgrading WiredTiger major and minor releases. Specifically, by upgrading, we mean migrating an application and its databases to a newer WiredTiger release, and by downgrading, we mean reverting to an older version.</p>
<p>When upgrading or downgrading between WiredTiger releases, there are two components to consider: the WiredTiger library API and the underlying data files used for the database (for example, log files or B+tree files).</p>
<p>As part of each WiredTiger release, a new <a class="el" href="upgrading.html">Upgrading WiredTiger applications</a> documentation section is created, describing changes in the WiredTiger API and in the format of underlying files, if any. Changes to the format of the underlying data files are extremely rare, while changes to WiredTiger API are more common. Generally, when the WiredTiger API changes, the changes are backward compatible and applications do not require modifications in order to upgrade to the new release.</p>
<p>Note it is not necessary to upgrade (downgrade) to intermediate releases, you can ignore intermediate releases and upgrade (downgrade) directly to the release you plan to use.</p>
<p>To upgrade to a new release of WiredTiger:</p>
<ol type="1">
<li>Review the information for each release after the WiredTiger release you're currently using, up to and including the release you plan to use. Changes to the WiredTiger API are normally backward compatible, that is, you can continue to use the same WiredTiger configuration values used previously. However, it will likely enhance program maintainability to switch to newer versions of the configuration strings, as documentation for the deprecated values will no longer be available. <br/>
<br/>
</li>
<li>Once you have reviewed the relevant release notes and modified your application as necessary, install the new version of the application by relinking or installing a new version of the WiredTiger shared library. <br/>
<br/>
</li>
<li>Shut down the old version of the application. <br/>
<br/>
</li>
<li>Start the new version of the application. <br/>
<br/>
 If the upgrading documentation for any release after the previous release and up to and including the release you are using, specifies underlying data file formats are no longer backward compatible and will not be upgraded at run-time, a data upgrade step is required before the data can be accessed. In this case, data files must be upgraded using the <a class="el" href="struct_w_t___s_e_s_s_i_o_n.html#a556046adc68a33bd317865c6a8d9ad69" title="Upgrade a table or file. ">WT_SESSION::upgrade</a> method.</li>
</ol>
<p>Applications wanting the ability to downgrade to previous releases of WiredTiger are constrained in some important ways:</p>
<ul>
<li>The underlying table file formats must not have changed between the release currently being run and the release to which you are downgrading. In other words, table file format changes are not backward compatible, and an upgraded table file cannot be downgraded without being dumped and re-loaded.</li>
<li>If the underlying log file format changed and you have logging enabled in the database, in order to retain the ability to downgrade to earlier releases you must use <code>compatibility</code> option in the call to <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database. ">wiredtiger_open</a> or <a class="el" href="struct_w_t___c_o_n_n_e_c_t_i_o_n.html#a579141678af06217b22869cbc604c6d4" title="Reconfigure a connection handle. ">WT_CONNECTION::reconfigure</a>. When running at an earlier compatibility release setting, the log files generated will be compatible with earlier binaries. <br/>
<br/>
</li>
<li>Applications concerned with downgrading should configure the <a class="el" href="group__wt.html#ga9e6adae3fc6964ef837a62795c7840ed" title="Open a connection to a database. ">wiredtiger_open</a> <code>config_base</code> value to <code>false</code>, so WiredTiger does not write the base configuration file file when creating databases. Because the base configuration file is written using a current version of the WiredTiger API, writing this file could cause applications using previous versions of the WiredTiger API to fail. See <a class="el" href="database_config.html#config_base">WiredTiger.basecfg file</a> for more information.</li>
</ul>
<p>To downgrade to a previous release of WiredTiger:</p>
<ol type="1">
<li>Shut down the new version of the application. <br/>
<br/>
</li>
<li>Start the old version of the application. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Reference Guide</a></li><li class="navelem"><a class="el" href="programming_lang_java.html">Writing WiredTiger applications  in Java</a></li>
    <li class="footer">Copyright (c) 2008-2017 MongoDB, Inc.  All rights reserved.  Contact <a href="mailto:info@wiredtiger.com">info@wiredtiger.com</a> for more information.</li>
  </ul>
</div>
</body>
</html>
