以下是7.0.6版本选择索引和replan过程的详细日志,可以帮助理解索引选择和replan原理:

for (i = 1; i <= 50000; i++) db.yyz1.insert({filed1:"a"+i, filed2:"b"+i, filed3:"c"+i})



第一步:
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{ "_id" : ObjectId("672db46989e05f89e30451b5"), "filed1" : "a10", "filed2" : "b10", "filed3" : "c10" }
> 
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 1,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 2,\n    \"advanced\": 1,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 1,\n    \"docsExamined\": 1,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 1,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 2,\n        \"advanced\": 1,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 1,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 1,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":true}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(1.5002) = baseScore(1) + productivity((1 advanced)/(2 works) = 0.5) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":1.5002}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20959,   "ctx":"conn1","msg":"Adding EOF bonus to score","attr":{"eofBonus":1}}
{"t":{"$date":"2024-11-08T15:58:16.480+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 1,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 2,\n    \"advanced\": 1,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 1,\n    \"docsExamined\": 1,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 1,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 2,\n        \"advanced\": 1,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 1,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 1,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":true}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(1.5002) = baseScore(1) + productivity((1 advanced)/(2 works) = 0.5) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":1.5002}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D5", "c":"QUERY",    "id":20959,   "ctx":"conn1","msg":"Adding EOF bonus to score","attr":{"eofBonus":1}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 1,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 2,\n    \"advanced\": 1,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 1,\n    \"docsExamined\": 1,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 1,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 2,\n        \"advanced\": 1,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 1,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 1,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":true}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(1.5002) = baseScore(1) + productivity((1 advanced)/(2 works) = 0.5) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":1.5002}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D5", "c":"QUERY",    "id":20959,   "ctx":"conn1","msg":"Adding EOF bonus to score","attr":{"eofBonus":1}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.5003000000000002) = score(2.5002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.5003000000000002) = score(2.5002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.5005000000000002) = score(2.5002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D1", "c":"QUERY",    "id":20937,   "ctx":"conn1","msg":"Creating inactive cache entry for query","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","newWorks":2}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":706,"keysExamined":1,"docsExamined":1,"fromMultiPlanner":true,"nBatches":1,"cursorExhausted":true,"numYields":0,"nreturned":1,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":171,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1298385,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T15:58:16.481+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":237675,"knownOps":[]}}


第二步: db.yyz1.getPlanCache().list()
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : false,
                "works" : NumberLong(2),
                "timeOfCreation" : ISODate("2024-11-08T07:58:16.481Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 1,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 1,
                                "totalDocsExamined" : 1,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 1,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 2,
                                        "advanced" : 1,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 1,
                                        "docsExamined" : 1,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 1,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 2,
                                                "advanced" : 1,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 1,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 1,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 1,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 1,
                                "totalDocsExamined" : 1,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 1,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 2,
                                        "advanced" : 1,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 1,
                                        "docsExamined" : 1,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 1,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 2,
                                                "advanced" : 1,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 1,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 1,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 1,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 1,
                                "totalDocsExamined" : 1,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 1,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 2,
                                        "advanced" : 1,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 1,
                                        "docsExamined" : 1,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 1,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 2,
                                                "advanced" : 1,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 1,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 1,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.5005,
                        2.5003,
                        2.5003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]





第三步: 
 db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{ "_id" : ObjectId("672db46989e05f89e30451b5"), "filed1" : "a10", "filed2" : "b10", "filed3" : "c10" }
> 

{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D2", "c":"QUERY",    "id":20936,   "ctx":"conn1","msg":"Not using cached entry since it is inactive","attr":{"cacheKey":"an[eqfiled1,eqfiled2]||||tf<11><11>"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:00:05.678+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 1,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 2,\n    \"advanced\": 1,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 1,\n    \"docsExamined\": 1,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 1,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 2,\n        \"advanced\": 1,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 1,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 1,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":true}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(1.5002) = baseScore(1) + productivity((1 advanced)/(2 works) = 0.5) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":1.5002}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20959,   "ctx":"conn1","msg":"Adding EOF bonus to score","attr":{"eofBonus":1}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 1,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 2,\n    \"advanced\": 1,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 1,\n    \"docsExamined\": 1,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 1,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 2,\n        \"advanced\": 1,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 1,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 1,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":true}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(1.5002) = baseScore(1) + productivity((1 advanced)/(2 works) = 0.5) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":1.5002}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20959,   "ctx":"conn1","msg":"Adding EOF bonus to score","attr":{"eofBonus":1}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 1,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 2,\n    \"advanced\": 1,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 1,\n    \"docsExamined\": 1,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 1,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 2,\n        \"advanced\": 1,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 1,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 1,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":true}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(1.5002) = baseScore(1) + productivity((1 advanced)/(2 works) = 0.5) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":1.5002}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20959,   "ctx":"conn1","msg":"Adding EOF bonus to score","attr":{"eofBonus":1}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.5003000000000002) = score(2.5002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.5003000000000002) = score(2.5002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.5005000000000002) = score(2.5002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D1", "c":"QUERY",    "id":20941,   "ctx":"conn1","msg":"Inactive cache entry for query is being promoted to active entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":2,"newWorks":2}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":569,"keysExamined":1,"docsExamined":1,"fromMultiPlanner":true,"nBatches":1,"cursorExhausted":true,"numYields":0,"nreturned":1,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":171,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1124097,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:00:05.679+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":239022,"knownOps":[]}}



第四步：
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : true,
                "works" : NumberLong(2),
                "timeOfCreation" : ISODate("2024-11-08T08:00:05.679Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 1,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 1,
                                "totalDocsExamined" : 1,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 1,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 2,
                                        "advanced" : 1,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 1,
                                        "docsExamined" : 1,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 1,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 2,
                                                "advanced" : 1,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 1,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 1,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 1,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 1,
                                "totalDocsExamined" : 1,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 1,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 2,
                                        "advanced" : 1,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 1,
                                        "docsExamined" : 1,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 1,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 2,
                                                "advanced" : 1,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 1,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 1,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 1,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 1,
                                "totalDocsExamined" : 1,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 1,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 2,
                                        "advanced" : 1,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 1,
                                        "docsExamined" : 1,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 1,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 2,
                                                "advanced" : 1,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 1,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 1,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.5005,
                        2.5003,
                        2.5003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]


第五步：
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{ "_id" : ObjectId("672db46989e05f89e30451b5"), "filed1" : "a10", "filed2" : "b10", "filed3" : "c10" }
> 

{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20963,   "ctx":"conn1","msg":"Tagging the match expression according to cache data","attr":{"filter":"$and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\n","cacheData":"(index-tagged expression tree: tree=Node\n---Leaf (filed1_1_filed2_1, ), pos: 0, can combine? 1\n---Leaf (filed1_1_filed2_1, ), pos: 1, can combine? 1\n)"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":0,"id":"(_id_, )"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":1,"id":"(filed1_1, )"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":2,"id":"(filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":3,"id":"(filed1_1_filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":4,"id":"(filed3_1, )"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20965,   "ctx":"conn1","msg":"Tagged tree","attr":{"tree":"$and || Selected Index #3 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #3 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #3 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D5", "c":"QUERY",    "id":20966,   "ctx":"conn1","msg":"Planner: solution constructed from the cache","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":392,"keysExamined":1,"docsExamined":1,"fromPlanCache":true,"nBatches":1,"cursorExhausted":true,"numYields":0,"nreturned":1,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":171,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":526528,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2024-11-08T16:05:54.922+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":243334,"knownOps":[]}}







第六部： 写入102条新数据
for (i = 1; i <= 102; i++) db.yyz1.insert({filed1:"a"+10, filed2:"b"+10, filed3:"c"+10})
{"t":{"$date":"2024-11-08T16:09:42.448+08:00"},"s":"D5", "c":"QUERY",    "id":20963,   "ctx":"conn1","msg":"Tagging the match expression according to cache data","attr":{"filter":"$and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\n","cacheData":"(index-tagged expression tree: tree=Node\n---Leaf (filed1_1_filed2_1, ), pos: 0, can combine? 1\n---Leaf (filed1_1_filed2_1, ), pos: 1, can combine? 1\n)"}}
{"t":{"$date":"2024-11-08T16:09:42.449+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":0,"id":"(_id_, )"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":1,"id":"(filed1_1, )"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":2,"id":"(filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":3,"id":"(filed1_1_filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":4,"id":"(filed3_1, )"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20965,   "ctx":"conn1","msg":"Tagged tree","attr":{"tree":"$and || Selected Index #3 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #3 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #3 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20966,   "ctx":"conn1","msg":"Planner: solution constructed from the cache","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D1", "c":"QUERY",    "id":20580,   "ctx":"conn1","msg":"Evicting cache entry and replanning query","attr":{"maxWorksBeforeReplan":20,"decisionWorks":2,"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:09:42.450+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0005000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D1", "c":"QUERY",    "id":20940,   "ctx":"conn1","msg":"Increasing work value associated with cache entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":2,"increasedWorks":4}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D1", "c":"QUERY",    "id":20582,   "ctx":"conn1","msg":"Query plan after replanning and its cache status","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","planSummary":"IXSCAN { filed1: 1, filed2: 1 }","shouldCache":"yes"}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":1317,"cursorid":6879289757100140138,"keysExamined":101,"docsExamined":101,"fromMultiPlanner":true,"replanned":true,"replanReason":"cached plan was less efficient than expected: expected trial execution to take 2 works but it took at least 20 works","nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1832736,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":2}}
{"t":{"$date":"2024-11-08T16:09:42.451+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":246346,"knownOps":[]}}





第7步；重新获取plancache (这时候isactive为false)
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : false,
                "works" : NumberLong(4),
                "timeOfCreation" : ISODate("2024-11-08T08:09:42.451Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]

第八步：重新获取一次
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})

{"t":{"$date":"2024-11-08T16:10:54.228+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"aggregate":"yyz1","pipeline":[{"$planCacheStats":{}}],"cursor":{},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"keysExamined":0,"docsExamined":0,"cursorExhausted":true,"numYields":0,"nreturned":1,"queryFramework":"classic","reslen":3397,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":1}},"FeatureCompatibilityVersion":{"acquireCount":{"r":2}},"ReplicationStateTransition":{"acquireCount":{"w":1}},"Global":{"acquireCount":{"r":2}},"Database":{"acquireCount":{"r":1}},"Collection":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":178916,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2024-11-08T16:10:54.228+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":247232,"knownOps":[]}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D2", "c":"QUERY",    "id":20936,   "ctx":"conn1","msg":"Not using cached entry since it is inactive","attr":{"cacheKey":"an[eqfiled1,eqfiled2]||||tf<11><11>"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:11:49.474+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0005000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D1", "c":"QUERY",    "id":20940,   "ctx":"conn1","msg":"Increasing work value associated with cache entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":4,"increasedWorks":8}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":651,"cursorid":3526829127385789254,"keysExamined":101,"docsExamined":101,"fromMultiPlanner":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1601783,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:11:49.475+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":247917,"knownOps":[]}}



第九步骤: isActive还是为false
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : false,
                "works" : NumberLong(8),
                "timeOfCreation" : ISODate("2024-11-08T08:11:49.475Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]


第十步：db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{"t":{"$date":"2024-11-08T16:16:10.537+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"aggregate":"yyz1","pipeline":[{"$planCacheStats":{}}],"cursor":{},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"keysExamined":0,"docsExamined":0,"cursorExhausted":true,"numYields":0,"nreturned":1,"queryFramework":"classic","reslen":3397,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":1}},"FeatureCompatibilityVersion":{"acquireCount":{"r":2}},"ReplicationStateTransition":{"acquireCount":{"w":1}},"Global":{"acquireCount":{"r":2}},"Database":{"acquireCount":{"r":1}},"Collection":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":188132,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2024-11-08T16:16:10.538+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":251137,"knownOps":[]}}
{"t":{"$date":"2024-11-08T16:16:51.950+08:00"},"s":"D2", "c":"QUERY",    "id":20936,   "ctx":"conn1","msg":"Not using cached entry since it is inactive","attr":{"cacheKey":"an[eqfiled1,eqfiled2]||||tf<11><11>"}}
{"t":{"$date":"2024-11-08T16:16:51.950+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:16:51.951+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0005000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D1", "c":"QUERY",    "id":20940,   "ctx":"conn1","msg":"Increasing work value associated with cache entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":8,"increasedWorks":16}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":571,"cursorid":1916832585757657509,"keysExamined":101,"docsExamined":101,"fromMultiPlanner":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1547843,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:16:51.952+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":251651,"knownOps":[]}}


第十一步：active还是为false
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : false,
                "works" : NumberLong(16),
                "timeOfCreation" : ISODate("2024-11-08T08:16:51.952Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]
> 





第十二步：
db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D2", "c":"QUERY",    "id":20936,   "ctx":"conn1","msg":"Not using cached entry since it is inactive","attr":{"cacheKey":"an[eqfiled1,eqfiled2]||||tf<11><11>"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:19:22.553+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:19:22.554+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0005000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:19:22.555+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:19:22.555+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:19:22.555+08:00"},"s":"D1", "c":"QUERY",    "id":20940,   "ctx":"conn1","msg":"Increasing work value associated with cache entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":16,"increasedWorks":32}}
{"t":{"$date":"2024-11-08T16:19:22.555+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":719,"cursorid":2035216973862440590,"keysExamined":101,"docsExamined":101,"fromMultiPlanner":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1794485,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:19:22.555+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":253510,"knownOps":[]}}



第十三步：active还是为false  work增加到32
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : false,
                "works" : NumberLong(32),
                "timeOfCreation" : ISODate("2024-11-08T08:19:22.555Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]
> 



第十四步：
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{"t":{"$date":"2024-11-08T16:20:09.420+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"aggregate":"yyz1","pipeline":[{"$planCacheStats":{}}],"cursor":{},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"keysExamined":0,"docsExamined":0,"cursorExhausted":true,"numYields":0,"nreturned":1,"queryFramework":"classic","reslen":3397,"locks":{"ParallelBatchWriterMode":{"acquireCount":{"r":1}},"FeatureCompatibilityVersion":{"acquireCount":{"r":2}},"ReplicationStateTransition":{"acquireCount":{"w":1}},"Global":{"acquireCount":{"r":2}},"Database":{"acquireCount":{"r":1}},"Collection":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":177173,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2024-11-08T16:20:09.421+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":254090,"knownOps":[]}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D2", "c":"QUERY",    "id":20936,   "ctx":"conn1","msg":"Not using cached entry since it is inactive","attr":{"cacheKey":"an[eqfiled1,eqfiled2]||||tf<11><11>"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:21:04.508+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0005000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D1", "c":"QUERY",    "id":20940,   "ctx":"conn1","msg":"Increasing work value associated with cache entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":32,"increasedWorks":64}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":553,"cursorid":8071429137781621881,"keysExamined":101,"docsExamined":101,"fromMultiPlanner":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1514940,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:21:04.509+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":254770,"knownOps":[]}}


第十五步： activer false  works增加到64
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : false,
                "works" : NumberLong(64),
                "timeOfCreation" : ISODate("2024-11-08T08:21:04.509Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]



第十六步：
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D2", "c":"QUERY",    "id":20936,   "ctx":"conn1","msg":"Not using cached entry since it is inactive","attr":{"cacheKey":"an[eqfiled1,eqfiled2]||||tf<11><11>"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:23:20.244+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0005000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D1", "c":"QUERY",    "id":20940,   "ctx":"conn1","msg":"Increasing work value associated with cache entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":64,"increasedWorks":128}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":686,"cursorid":7501524565691211665,"keysExamined":101,"docsExamined":101,"fromMultiPlanner":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1766051,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:23:20.245+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":256450,"knownOps":[]}}



第十七步：
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : false,
                "works" : NumberLong(128),
                "timeOfCreation" : ISODate("2024-11-08T08:23:20.245Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]





第十八步：
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D2", "c":"QUERY",    "id":20936,   "ctx":"conn1","msg":"Not using cached entry since it is inactive","attr":{"cacheKey":"an[eqfiled1,eqfiled2]||||tf<11><11>"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn1","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION ENUMERATE_OR_CHILDREN_LOCKSTEP ","query":"ns=test.yyz1Tree: $and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":1,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":2,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":3,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn1","msg":"Index number and details","attr":{"indexNumber":4,"index":"kp: { filed3: 1.0 } name: '(filed3_1, )' io: { v: 2, key: { filed3: 1.0 }, name: \"filed3_1\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed1"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20970,   "ctx":"conn1","msg":"Predicate over field","attr":{"field":"filed2"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":0,"index":"kp: { filed1: 1.0 } name: '(filed1_1, )' io: { v: 2, key: { filed1: 1.0 }, name: \"filed1_1\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":1,"index":"kp: { filed2: 1.0 } name: '(filed2_1, )' io: { v: 2, key: { filed2: 1.0 }, name: \"filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D2", "c":"QUERY",    "id":20971,   "ctx":"conn1","msg":"Relevant index","attr":{"indexNumber":2,"index":"kp: { filed1: 1.0, filed2: 1.0 } name: '(filed1_1_filed2_1, )' io: { v: 2, key: { filed1: 1.0, filed2: 1.0 }, name: \"filed1_1_filed2_1\" }"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn1","msg":"Rated tree","attr":{"tree":"$and\n    filed1 $eq \"a10\" || First: 0 2 notFirst: full path: filed1\n    filed2 $eq \"b10\" || First: 1 notFirst: 2 full path: filed2\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 0\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #0 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #0 pos 0 combine 1\n    filed2 $eq \"b10\"\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 1\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #1 pos 0 combine 1\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\" || Selected Index #1 pos 0 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20944,   "ctx":"conn1","msg":"Tagging memoID","attr":{"id":1}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20943,   "ctx":"conn1","msg":"Enumerator: memo just before moving","attr":{"memo":"[Node #1]: AND enumstate counter 2\n\tchoice 0:\n\t\tsubnodes: \n\t\tidx[0]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\n\tchoice 1:\n\t\tsubnodes: \n\t\tidx[1]\n\t\t\tpos 0 pred filed2 $eq \"b10\"\n\n\tchoice 2:\n\t\tsubnodes: \n\t\tidx[2]\n\t\t\tpos 0 pred filed1 $eq \"a10\"\n\t\t\tpos 1 pred filed2 $eq \"b10\"\n\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20976,   "ctx":"conn1","msg":"About to build solntree from tagged tree","attr":{"tree":"$and || Selected Index #2 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #2 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #2 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20978,   "ctx":"conn1","msg":"Planner: adding solution","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:25:08.583+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn1","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":3}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":0,"querySolution":"FETCH\n---filter:\n        filed2 $eq \"b10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1\n---------keyPattern = { filed1: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"]\n---------iets = (iets { filed1: 1.0 } (filed1: 1.0 (eval $eq #0)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed2\": {\n            \"$eq\": \"b10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1\n        },\n        \"indexName\": \"filed1_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":1,"querySolution":"FETCH\n---filter:\n        filed1 $eq \"a10\"\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed2_1\n---------keyPattern = { filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed2: 1.0 } (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"filter\": {\n        \"filed1\": {\n            \"$eq\": \"a10\"\n        }\n    },\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D5", "c":"QUERY",    "id":20956,   "ctx":"conn1","msg":"Scoring plan","attr":{"planIndex":2,"querySolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n","stats":"{\n    \"stage\": \"FETCH\",\n    \"nReturned\": 101,\n    \"executionTimeMillisEstimate\": 0,\n    \"works\": 101,\n    \"advanced\": 101,\n    \"needTime\": 0,\n    \"needYield\": 0,\n    \"saveState\": 0,\n    \"restoreState\": 0,\n    \"isEOF\": 0,\n    \"docsExamined\": 101,\n    \"alreadyHasObj\": 0,\n    \"inputStage\": {\n        \"stage\": \"IXSCAN\",\n        \"nReturned\": 101,\n        \"executionTimeMillisEstimate\": 0,\n        \"works\": 101,\n        \"advanced\": 101,\n        \"needTime\": 0,\n        \"needYield\": 0,\n        \"saveState\": 0,\n        \"restoreState\": 0,\n        \"isEOF\": 0,\n        \"keyPattern\": {\n            \"filed1\": 1,\n            \"filed2\": 1\n        },\n        \"indexName\": \"filed1_1_filed2_1\",\n        \"isMultiKey\": false,\n        \"multiKeyPaths\": {\n            \"filed1\": [],\n            \"filed2\": []\n        },\n        \"isUnique\": false,\n        \"isSparse\": false,\n        \"isPartial\": false,\n        \"indexVersion\": 2,\n        \"direction\": \"forward\",\n        \"indexBounds\": {\n            \"filed1\": [\n                \"[\\\"a10\\\", \\\"a10\\\"]\"\n            ],\n            \"filed2\": [\n                \"[\\\"b10\\\", \\\"b10\\\"]\"\n            ]\n        },\n        \"keysExamined\": 101,\n        \"seeks\": 1,\n        \"dupsTested\": 0,\n        \"dupsDropped\": 0\n    }\n}"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":20957,   "ctx":"conn1","msg":"Scoring query plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planHitEOF":false}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":20961,   "ctx":"conn1","msg":"Score formula","attr":{"formula":"score(2.0002) = baseScore(1) + productivity((101 advanced)/(101 works) = 1) + tieBreakers(0 noFetchBonus + 0.0001 noSortBonus + 0.0001 noIxisectBonus = 0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D5", "c":"QUERY",    "id":20958,   "ctx":"conn1","msg":"Basic plan score","attr":{"score":2.0002}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0003000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0)"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":8027500, "ctx":"conn1","msg":"Tie breaking heuristics","attr":{"formula":"isPlanTied: 1. finalScore(2.0005000000000002) = score(2.0002) + docsExaminedBonus(0.0001) + indexPrefixBonus(0.00020000000000000001)"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D5", "c":"QUERY",    "id":20590,   "ctx":"conn1","msg":"Winning solution","attr":{"bestSolution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":20591,   "ctx":"conn1","msg":"Winning plan","attr":{"planSummary":"IXSCAN { filed1: 1, filed2: 1 }"}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D1", "c":"QUERY",    "id":20941,   "ctx":"conn1","msg":"Inactive cache entry for query is being promoted to active entry","attr":{"query":"ns: test.yyz1 query: { filed1: \"a10\", filed2: \"b10\" } sort: {} projection: {}","queryHash":"E862472B","planCacheKey":"AF7E4C50","oldWorks":128,"newWorks":101}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":550,"cursorid":6351424476493599003,"keysExamined":101,"docsExamined":101,"fromMultiPlanner":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":1511104,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:25:08.584+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":257788,"knownOps":[]}}

第十九步： 这时候isactive为true
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : true,
                "works" : NumberLong(101),
                "timeOfCreation" : ISODate("2024-11-08T08:25:08.584Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]


第二十步:
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})
{"t":{"$date":"2024-11-08T16:27:22.621+08:00"},"s":"D5", "c":"QUERY",    "id":20963,   "ctx":"conn1","msg":"Tagging the match expression according to cache data","attr":{"filter":"$and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\n","cacheData":"(index-tagged expression tree: tree=Node\n---Leaf (filed1_1_filed2_1, ), pos: 0, can combine? 1\n---Leaf (filed1_1_filed2_1, ), pos: 1, can combine? 1\n)"}}
{"t":{"$date":"2024-11-08T16:27:22.621+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":0,"id":"(_id_, )"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":1,"id":"(filed1_1, )"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":2,"id":"(filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":3,"id":"(filed1_1_filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":4,"id":"(filed3_1, )"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"D5", "c":"QUERY",    "id":20965,   "ctx":"conn1","msg":"Tagged tree","attr":{"tree":"$and || Selected Index #3 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #3 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #3 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"D5", "c":"QUERY",    "id":20966,   "ctx":"conn1","msg":"Planner: solution constructed from the cache","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:27:22.622+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":1012,"cursorid":8093853035710987029,"keysExamined":101,"docsExamined":101,"fromPlanCache":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":673813,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":1}}
{"t":{"$date":"2024-11-08T16:27:22.623+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":259445,"knownOps":[]}}





第二十一：
> 
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : true,
                "works" : NumberLong(101),
                "timeOfCreation" : ISODate("2024-11-08T08:25:08.584Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]


第二十一步:
> db.yyz1.find({"filed1" : "a10", "filed2" : "b10"})  这里还是返回103条数据
{"t":{"$date":"2024-11-08T16:28:45.319+08:00"},"s":"D5", "c":"QUERY",    "id":20963,   "ctx":"conn1","msg":"Tagging the match expression according to cache data","attr":{"filter":"$and\n    filed1 $eq \"a10\"\n    filed2 $eq \"b10\"\n","cacheData":"(index-tagged expression tree: tree=Node\n---Leaf (filed1_1_filed2_1, ), pos: 0, can combine? 1\n---Leaf (filed1_1_filed2_1, ), pos: 1, can combine? 1\n)"}}
{"t":{"$date":"2024-11-08T16:28:45.319+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":0,"id":"(_id_, )"}}
{"t":{"$date":"2024-11-08T16:28:45.319+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":1,"id":"(filed1_1, )"}}
{"t":{"$date":"2024-11-08T16:28:45.319+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":2,"id":"(filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:28:45.319+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":3,"id":"(filed1_1_filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:28:45.319+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":4,"id":"(filed3_1, )"}}
{"t":{"$date":"2024-11-08T16:28:45.319+08:00"},"s":"D5", "c":"QUERY",    "id":20965,   "ctx":"conn1","msg":"Tagged tree","attr":{"tree":"$and || Selected Index #3 pos 0 combine 1\n    filed1 $eq \"a10\" || Selected Index #3 pos 0 combine 1\n    filed2 $eq \"b10\" || Selected Index #3 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:28:45.320+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:28:45.320+08:00"},"s":"D5", "c":"QUERY",    "id":20966,   "ctx":"conn1","msg":"Planner: solution constructed from the cache","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a10\", \"a10\"], field #1['filed2']: [\"b10\", \"b10\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:28:45.320+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a10","filed2":"b10"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":298,"cursorid":3968609479130799394,"keysExamined":101,"docsExamined":101,"fromPlanCache":true,"nBatches":1,"numYields":0,"nreturned":101,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":7563,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{},"cpuNanos":618801,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2024-11-08T16:28:45.320+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":260469,"knownOps":[]}}



第二十二步： 注意这里value改为了a11 b11，只返回1条数据  从日志看，注意这里还是用了active的索引
> db.yyz1.find({"filed1" : "a11", "filed2" : "b11"})
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20963,   "ctx":"conn1","msg":"Tagging the match expression according to cache data","attr":{"filter":"$and\n    filed1 $eq \"a11\"\n    filed2 $eq \"b11\"\n","cacheData":"(index-tagged expression tree: tree=Node\n---Leaf (filed1_1_filed2_1, ), pos: 0, can combine? 1\n---Leaf (filed1_1_filed2_1, ), pos: 1, can combine? 1\n)"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":0,"id":"(_id_, )"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":1,"id":"(filed1_1, )"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":2,"id":"(filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":3,"id":"(filed1_1_filed2_1, )"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20964,   "ctx":"conn1","msg":"Index mapping: number and identifier","attr":{"indexNumber":4,"id":"(filed3_1, )"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20965,   "ctx":"conn1","msg":"Tagged tree","attr":{"tree":"$and || Selected Index #3 pos 0 combine 1\n    filed1 $eq \"a11\" || Selected Index #3 pos 0 combine 1\n    filed2 $eq \"b11\" || Selected Index #3 pos 1 combine 1\n"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":6334900, "ctx":"conn1","msg":"Build IETs","attr":{"iets":"(iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D5", "c":"QUERY",    "id":20966,   "ctx":"conn1","msg":"Planner: solution constructed from the cache","attr":{"solution":"FETCH\n---nodeId = 2\n---fetched = 1\n---sortedByDiskLoc = 1\n---providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n---Child:\n------IXSCAN\n---------indexName = filed1_1_filed2_1\n---------keyPattern = { filed1: 1.0, filed2: 1.0 }\n---------direction = 1\n---------bounds = field #0['filed1']: [\"a11\", \"a11\"], field #1['filed2']: [\"b11\", \"b11\"]\n---------iets = (iets { filed1: 1.0, filed2: 1.0 } (filed1: 1.0 (eval $eq #0)) (filed2: 1.0 (eval $eq #1)))\n---------nodeId = 1\n---------fetched = 0\n---------sortedByDiskLoc = 1\n---------providedSorts = {baseSortPattern: {}, ignoredFields: [filed1, filed2]}\n"}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn1","msg":"Slow query","attr":{"type":"command","ns":"test.yyz1","appName":"MongoDB Shell","command":{"find":"yyz1","filter":{"filed1":"a11","filed2":"b11"},"lsid":{"id":{"$uuid":"211106ca-9d2a-4e28-8634-35085a2aa635"}},"$db":"test"},"planSummary":"IXSCAN { filed1: 1, filed2: 1 }","planningTimeMicros":311,"keysExamined":1,"docsExamined":1,"fromPlanCache":true,"nBatches":1,"cursorExhausted":true,"numYields":0,"nreturned":1,"queryHash":"E862472B","planCacheKey":"AF7E4C50","queryFramework":"classic","reslen":171,"locks":{"FeatureCompatibilityVersion":{"acquireCount":{"r":1}},"Global":{"acquireCount":{"r":1}}},"storage":{"data":{"bytesRead":14729,"timeReadingMicros":44}},"cpuNanos":496851,"remote":"127.0.0.1:42802","protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2024-11-08T16:29:33.026+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn1","msg":"Received interrupt request for unknown op","attr":{"opId":261058,"knownOps":[]}}


第二十三步：
> db.yyz1.getPlanCache().list()
[
        {
                "version" : "1",
                "queryHash" : "E862472B",
                "planCacheKey" : "AF7E4C50",
                "isActive" : true,
                "works" : NumberLong(101),
                "timeOfCreation" : ISODate("2024-11-08T08:50:23.427Z"),
                "createdFromQuery" : {
                        "query" : {
                                "filed1" : "a10",
                                "filed2" : "b10"
                        },
                        "sort" : {

                        },
                        "projection" : {

                        }
                },
                "cachedPlan" : {
                        "stage" : "FETCH",
                        "inputStage" : {
                                "stage" : "IXSCAN",
                                "keyPattern" : {
                                        "filed1" : 1,
                                        "filed2" : 1
                                },
                                "indexName" : "filed1_1_filed2_1",
                                "isMultiKey" : false,
                                "multiKeyPaths" : {
                                        "filed1" : [ ],
                                        "filed2" : [ ]
                                },
                                "isUnique" : false,
                                "isSparse" : false,
                                "isPartial" : false,
                                "indexVersion" : 2,
                                "direction" : "forward",
                                "indexBounds" : {
                                        "filed1" : [
                                                "[\"a10\", \"a10\"]"
                                        ],
                                        "filed2" : [
                                                "[\"b10\", \"b10\"]"
                                        ]
                                }
                        }
                },
                "creationExecStats" : [
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1,
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed1_1_filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ],
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ],
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed2" : {
                                                        "$eq" : "b10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed1" : 1
                                                },
                                                "indexName" : "filed1_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed1" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed1" : [
                                                                "[\"a10\", \"a10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        },
                        {
                                "nReturned" : 101,
                                "executionTimeMillisEstimate" : 0,
                                "totalKeysExamined" : 101,
                                "totalDocsExamined" : 101,
                                "executionStages" : {
                                        "stage" : "FETCH",
                                        "filter" : {
                                                "filed1" : {
                                                        "$eq" : "a10"
                                                }
                                        },
                                        "nReturned" : 101,
                                        "executionTimeMillisEstimate" : 0,
                                        "works" : 101,
                                        "advanced" : 101,
                                        "needTime" : 0,
                                        "needYield" : 0,
                                        "saveState" : 0,
                                        "restoreState" : 0,
                                        "isEOF" : 0,
                                        "docsExamined" : 101,
                                        "alreadyHasObj" : 0,
                                        "inputStage" : {
                                                "stage" : "IXSCAN",
                                                "nReturned" : 101,
                                                "executionTimeMillisEstimate" : 0,
                                                "works" : 101,
                                                "advanced" : 101,
                                                "needTime" : 0,
                                                "needYield" : 0,
                                                "saveState" : 0,
                                                "restoreState" : 0,
                                                "isEOF" : 0,
                                                "keyPattern" : {
                                                        "filed2" : 1
                                                },
                                                "indexName" : "filed2_1",
                                                "isMultiKey" : false,
                                                "multiKeyPaths" : {
                                                        "filed2" : [ ]
                                                },
                                                "isUnique" : false,
                                                "isSparse" : false,
                                                "isPartial" : false,
                                                "indexVersion" : 2,
                                                "direction" : "forward",
                                                "indexBounds" : {
                                                        "filed2" : [
                                                                "[\"b10\", \"b10\"]"
                                                        ]
                                                },
                                                "keysExamined" : 101,
                                                "seeks" : 1,
                                                "dupsTested" : 0,
                                                "dupsDropped" : 0
                                        }
                                }
                        }
                ],
                "candidatePlanScores" : [
                        2.0005,
                        2.0003,
                        2.0003
                ],
                "indexFilterSet" : false,
                "estimatedSizeBytes" : NumberLong(4602),
                "host" : "VM-242-181-centos:29100"
        }
]



